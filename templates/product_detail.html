<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product.name }} - PujaPath</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .benefit-frame {
            border: 1px solid #667eea;
            border-radius: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);
            position: relative;
        }
        
        .benefit-frame::before {
            content: '';
            position: absolute;
            top: -1px;
            left: -1px;
            right: -1px;
            bottom: -1px;
            border-radius: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: -1;
            opacity: 0.1;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <a href="{{ url_for('home') }}" class="text-2xl font-bold gradient-text">PujaPath</a>
                <div class="flex items-center gap-4">
                    <a href="{{ url_for('home') }}#essentials" class="text-gray-600 hover:text-gray-900">‚Üê Back to Products</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-12 max-w-6xl">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <!-- Left Column: Product Image & Benefits -->
            <div class="space-y-6">
                <!-- Product Image -->
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden card-hover border-2 border-gray-200">
                    <div class="relative">
                        <img src="{{ url_for('static', filename=product.image_url) }}" 
                             alt="{{ product.name }}"
                             class="w-full h-96 object-cover">
                        <div class="absolute top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg">
                            20% OFF
                        </div>
                    </div>
                </div>

                <!-- Product Benefits (Below Image) -->
                <div class="benefit-frame">
                    <h3 class="text-xl font-bold text-gray-800 mb-6 text-center">Product Benefits</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center p-4 bg-white rounded-xl">
                            <div class="text-5xl mb-3">üïâÔ∏è</div>
                            <h4 class="font-bold text-gray-800 mb-2">Spiritual</h4>
                            <p class="text-xs text-gray-600">Enhances spiritual connection & devotion</p>
                        </div>
                        <div class="text-center p-4 bg-white rounded-xl">
                            <div class="text-5xl mb-3">‚ú®</div>
                            <h4 class="font-bold text-gray-800 mb-2">Authentic</h4>
                            <p class="text-xs text-gray-600">100% genuine & verified products</p>
                        </div>
                        <div class="text-center p-4 bg-white rounded-xl">
                            <div class="text-5xl mb-3">üéØ</div>
                            <h4 class="font-bold text-gray-800 mb-2">Premium</h4>
                            <p class="text-xs text-gray-600">High-quality materials & craftsmanship</p>
                        </div>
                        <div class="text-center p-4 bg-white rounded-xl">
                            <div class="text-5xl mb-3">üôè</div>
                            <h4 class="font-bold text-gray-800 mb-2">Traditional</h4>
                            <p class="text-xs text-gray-600">Made following ancient traditions</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Product Details -->
            <div class="space-y-6">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <span class="inline-block px-4 py-2 bg-green-100 text-green-600 rounded-full text-sm font-semibold mb-4">Premium Quality</span>
                    <h1 class="text-4xl font-bold text-gray-800 mb-4">{{ product.name }}</h1>
                    
                    <!-- Rating -->
                    <div class="flex items-center mb-4">
                        <div class="flex text-yellow-400 text-lg">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        <span class="text-gray-600 ml-3 font-semibold">4.8/5</span>
                        <span class="text-gray-400 ml-2">(124 reviews)</span>
                    </div>

                    <!-- Price -->
                    <div class="mb-6">
                        <div class="flex items-baseline gap-4">
                            <span class="text-4xl font-bold text-green-600">‚Çπ{{ product.price }}</span>
                            <span class="text-2xl text-gray-400 line-through">‚Çπ{{ (product.price * 1.25)|round|int }}</span>
                            <span class="px-3 py-1 bg-red-100 text-red-600 rounded-full text-sm font-bold">Save 20%</span>
                        </div>
                        <p class="text-sm text-gray-500 mt-2">Inclusive of all taxes</p>
                    </div>

                    <!-- Quantity & Add to Cart -->
                    <div class="mb-6">
                        <label class="block text-gray-700 font-semibold mb-2">Quantity</label>
                        <div class="flex items-center gap-4">
                            <div class="flex items-center border-2 border-gray-300 rounded-lg">
                                <button onclick="updateQuantity(-1)" class="px-4 py-2 text-gray-600 hover:bg-gray-100 font-bold">-</button>
                                <input type="number" id="quantity" value="1" min="1" max="10" 
                                       class="w-16 text-center border-0 focus:ring-0 font-bold">
                                <button onclick="updateQuantity(1)" class="px-4 py-2 text-gray-600 hover:bg-gray-100 font-bold">+</button>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="space-y-4 mb-6">
                        <button onclick="addToCart()" 
                                class="w-full bg-gradient-to-r from-green-600 to-emerald-700 text-white py-4 rounded-xl font-bold text-lg hover:from-green-700 hover:to-emerald-800 transition-all shadow-lg hover:shadow-xl transform hover:scale-105">
                            Add to Cart
                        </button>
                        <button onclick="buyNow()" 
                                class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-xl font-bold text-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl">
                            Buy Now
                        </button>
                    </div>

                    <!-- Features -->
                    <div class="mb-6 bg-gray-50 rounded-xl p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Key Features</h3>
                        <ul class="space-y-2">
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-600 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                <span class="text-gray-700">Authentic & Premium Quality</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-600 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                <span class="text-gray-700">Fast & Secure Delivery</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-600 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                <span class="text-gray-700">100% Authentic Products</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-600 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                <span class="text-gray-700">Easy Returns & Exchange</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Product Specifications -->
                    <div class="bg-gray-50 rounded-xl p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Product Specifications</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between py-2 border-b border-gray-200">
                                <span class="text-gray-600 font-medium">Material</span>
                                <span class="text-gray-800 font-semibold">Premium Quality</span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-gray-200">
                                <span class="text-gray-600 font-medium">Origin</span>
                                <span class="text-gray-800 font-semibold">Made in India</span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-gray-200">
                                <span class="text-gray-600 font-medium">Certification</span>
                                <span class="text-gray-800 font-semibold">Authentic & Verified</span>
                            </div>
                            <div class="flex justify-between py-2 border-b border-gray-200">
                                <span class="text-gray-600 font-medium">Warranty</span>
                                <span class="text-gray-800 font-semibold">Quality Guaranteed</span>
                            </div>
                            <div class="flex justify-between py-2">
                                <span class="text-gray-600 font-medium">Delivery</span>
                                <span class="text-green-600 font-semibold">2-3 Business Days</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- You May Also Like Section (Full Width Below Product Details) -->
        {% if related_products %}
        <div class="mt-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">You May Also Like</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
                {% for related in related_products %}
                <a href="{{ url_for('product_detail', product_id=related.id) }}" class="bg-white rounded-xl shadow-lg p-4 card-hover border border-gray-200 hover:border-purple-300 transition-all">
                    <div class="relative mb-3 overflow-hidden rounded-lg">
                        <img src="{{ url_for('static', filename=related.image_url) }}" 
                             alt="{{ related.name }}"
                             class="w-full h-48 object-cover">
                        <div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold">
                            20% OFF
                        </div>
                    </div>
                    <h3 class="font-bold text-gray-800 mb-2 line-clamp-2 text-sm">{{ related.name }}</h3>
                    <div class="flex items-center justify-between">
                        <p class="text-green-600 font-bold">‚Çπ{{ related.price }}</p>
                        <span class="text-gray-400 text-xs line-through">‚Çπ{{ (related.price * 1.25)|round|int }}</span>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- Additional Info Section -->
        <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-white rounded-xl shadow-lg p-6 text-center card-hover">
                <div class="text-4xl mb-4">üöö</div>
                <h3 class="font-bold text-gray-800 mb-2">Free Delivery</h3>
                <p class="text-sm text-gray-600">On orders above ‚Çπ500</p>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-6 text-center card-hover">
                <div class="text-4xl mb-4">üîÑ</div>
                <h3 class="font-bold text-gray-800 mb-2">Easy Returns</h3>
                <p class="text-sm text-gray-600">7-day return policy</p>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-6 text-center card-hover">
                <div class="text-4xl mb-4">‚úÖ</div>
                <h3 class="font-bold text-gray-800 mb-2">Authentic Products</h3>
                <p class="text-sm text-gray-600">100% genuine guarantee</p>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-16 py-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2024 PujaPath. All rights reserved.</p>
        </div>
    </footer>

    <script>
        const productId = {{ product.id }};
        const productName = '{{ product.name }}';
        const productPrice = {{ product.price }};

        function updateQuantity(change) {
            const qtyInput = document.getElementById('quantity');
            let qty = parseInt(qtyInput.value) || 1;
            qty += change;
            if (qty < 1) qty = 1;
            if (qty > 10) qty = 10;
            qtyInput.value = qty;
        }

        function addToCart() {
            const quantity = parseInt(document.getElementById('quantity').value) || 1;
            
            // Get cart from localStorage
            let cart = JSON.parse(localStorage.getItem('pujapath_cart')) || [];
            
            // Check if item already exists
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({ id: productId, name: productName, price: productPrice, quantity: quantity });
            }
            
            localStorage.setItem('pujapath_cart', JSON.stringify(cart));
            
            // Show notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-24 right-6 bg-green-500 text-white px-6 py-4 rounded-xl shadow-2xl z-50';
            notification.innerHTML = `<strong>Added to cart!</strong><br><span class="text-sm">${productName} (${quantity})</span>`;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
            
            // Update cart count if on home page
            if (window.opener) {
                window.opener.location.reload();
            }
        }

        function buyNow() {
            const quantity = parseInt(document.getElementById('quantity').value) || 1;
            
            // Add to cart first
            let cart = JSON.parse(localStorage.getItem('pujapath_cart')) || [];
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({ id: productId, name: productName, price: productPrice, quantity: quantity });
            }
            localStorage.setItem('pujapath_cart', JSON.stringify(cart));
            
            // Redirect to checkout
            const cartData = encodeURIComponent(JSON.stringify(cart));
            window.location.href = `/checkout?cart=${cartData}`;
        }
    </script>
</body>
</html>
